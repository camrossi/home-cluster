#image:
#  repository: quay.io/linuxserver.io/nextcloud
  #flavor: fpm
  # default is generated by flavor and appVersion
#  tag: 28.0.2
#  pullPolicy: IfNotPresent

image:
  repository: nextcloud
  flavor: fpm-alpine
  # default is generated by flavor and appVersion
  tag: 28.0.2
  pullPolicy: IfNotPresent
ingress:
  enabled: true



phpClientHttpsFix:
  enabled: false
  protocol: https

nodeSelector:
  ciliuml2Announcement: "yes"

nextcloud:
  host: nextcloud.camsab.me
  ## Use an existing secret
  existingSecret:
    enabled: true
    secretName: nextcloud-credentials
    usernameKey: nextcloud-username
    passwordKey: nextcloud-password
  configs:
    custom.config.php: |-
      <?php
      $CONFIG = array (
        'overwriteprotocol' => 'https',
        'overwrite.cli.url' => 'https://nextcloud.camsab.me',
        'filelocking.enabled' => 'true',
        'loglevel' => '2',
        'enable_previews' => false
      );
internalDatabase:
  enabled: true

externalDatabase:
  enabled: false
  type: mysql
  existingSecret:
    enabled: true
    secretName: mariadb-credentials
    passwordKey: db-password
    
postgresql:
  enabled: false
mariadb:
  db:
    name: nextcloud
  enabled: false
  auth:
    existingSecret: "mariadb-credentials"
  master:
    persistence:
      accessMode: ReadWriteOnce
      enabled: true
      size: 8Gi
  replication:
    enabled: false

## Enable persistence using Persistent Volume Claims
## ref: http://kubernetes.io/docs/user-guide/persistent-volumes/
##
persistence:
  enabled: true
  accessMode: ReadWriteOnce
  size: 100Gi

## Esnsure there is enough time to start the container before the  liveness probe kills it
startupProbe:
  enabled: true
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 30
  successThreshold: 1